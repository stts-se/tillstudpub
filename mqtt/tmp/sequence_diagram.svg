<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1155px" preserveAspectRatio="none" style="width:1364px;height:1155px;" version="1.1" viewBox="0 0 1364 1155" width="1364px" zoomAndPan="magnify"><defs><filter height="300%" id="f19c120dg4zagb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="214.8281"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="345.3594"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="447.8906"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="549.2891"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="734.0859"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="846.6172"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="948.0156"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="1021.4141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="110" x2="110" y1="86.2969" y2="1068.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="514" x2="514" y1="86.2969" y2="1068.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1154.5" x2="1154.5" y1="86.2969" y2="1068.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1272.5" x2="1272.5" y1="86.2969" y2="1068.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="97" y="82.9951">CLI</text><ellipse cx="110" cy="13" fill="#FEFECE" filter="url(#f19c120dg4zagb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M110,21 L110,48 M97,29 L123,29 M110,48 L97,63 M110,48 L123,63 " fill="none" filter="url(#f19c120dg4zagb)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="97" y="1080.542">CLI</text><ellipse cx="110" cy="1093.8438" fill="#FEFECE" filter="url(#f19c120dg4zagb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M110,1101.8438 L110,1128.8438 M97,1109.8438 L123,1109.8438 M110,1128.8438 L97,1143.8438 M110,1128.8438 L123,1143.8438 " fill="none" filter="url(#f19c120dg4zagb)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="482" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="489" y="70.9951">Broker</text><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="482" y="1067.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="489" y="1087.542">Broker</text><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="1120.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="1127.5" y="70.9951">Module</text><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="1120.5" y="1067.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="1127.5" y="1087.542">Module</text><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="1239.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="1246.5" y="70.9951">Logger</text><rect fill="#FEFECE" filter="url(#f19c120dg4zagb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="1239.5" y="1067.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="1246.5" y="1087.542">Logger</text><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="214.8281"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="345.3594"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="447.8906"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="549.2891"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="734.0859"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="846.6172"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="948.0156"/><rect fill="#FFFFFF" filter="url(#f19c120dg4zagb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="509" y="1021.4141"/><path d="M1197,101.2969 L1197,141.2969 L1343,141.2969 L1343,111.2969 L1333,101.2969 L1197,101.2969 " fill="#FBFB77" filter="url(#f19c120dg4zagb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1333,101.2969 L1333,111.2969 L1343,111.2969 L1333,101.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1222.5" y="118.3638">Not included in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1212" y="133.4966">STTS' demo setup</text><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1349" x="3" y="171.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="171.1289" y2="171.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="174.1289" y2="174.1289"/><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="99" x="628" y="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="634" y="176.6294">Logger init</text><polygon fill="#A80036" points="530,210.8281,520,214.8281,530,218.8281,526,214.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1271.5" y1="214.8281" y2="214.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="536" y="209.7622">Connect to server</text><polygon fill="#A80036" points="1260.5,239.9609,1270.5,243.9609,1260.5,247.9609,1264.5,243.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1266.5" y1="243.9609" y2="243.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="521" y="238.895">Confirm connect</text><polygon fill="#A80036" points="525,269.0938,515,273.0938,525,277.0938,521,273.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="1271.5" y1="273.0938" y2="273.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="531" y="268.0278">Subscribe to +/+/+/log</text><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1349" x="3" y="301.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="301.6602" y2="301.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="304.6602" y2="304.6602"/><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="101" x="627" y="291.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="633" y="307.1606">Module init</text><polygon fill="#A80036" points="530,341.3594,520,345.3594,530,349.3594,526,345.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1154" y1="345.3594" y2="345.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="536" y="340.2935">Connect to server</text><polygon fill="#A80036" points="1143,370.4922,1153,374.4922,1143,378.4922,1147,374.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1149" y1="374.4922" y2="374.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="521" y="369.4263">Confirm connect</text><polygon fill="#A80036" points="525,399.625,515,403.625,525,407.625,521,403.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="1154" y1="403.625" y2="403.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="531" y="398.5591">Subscribe to topic ORG/PROJECT/MODULE</text><polygon fill="#A80036" points="530,443.8906,520,447.8906,530,451.8906,526,447.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1154" y1="447.8906" y2="447.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="536" y="427.6919">Publish to ORG/PROJECT/MODULE/log:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="240" x="536" y="442.8247">Subscribed to ORG/PROJECT/MODULE</text><polygon fill="#A80036" points="1260.5,473.0234,1270.5,477.0234,1260.5,481.0234,1264.5,477.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1266.5" y1="477.0234" y2="477.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="521" y="471.9575">Forward logging to Logger</text><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1349" x="3" y="505.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="505.5898" y2="505.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="508.5898" y2="508.5898"/><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="69" x="643" y="495.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="649" y="511.0903">CLI init</text><polygon fill="#A80036" points="497,545.2891,507,549.2891,497,553.2891,501,549.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110" x2="503" y1="549.2891" y2="549.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="117" y="544.2231">Connect to server</text><polygon fill="#A80036" points="121,574.4219,111,578.4219,121,582.4219,117,578.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="513" y1="578.4219" y2="578.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="127" y="573.356">Confirm connect</text><polygon fill="#A80036" points="502,618.6875,512,622.6875,502,626.6875,506,622.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110" x2="508" y1="622.6875" y2="622.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="117" y="602.4888">Subscribe to a unique request topic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="380" x="117" y="617.6216">(usually CLIENTNAME-UUID or CLIENTNAME-UUID-MODULE)</text><path d="M310,635.6875 L310,660.6875 L505,660.6875 L505,645.6875 L495,635.6875 L310,635.6875 " fill="#FBFB77" filter="url(#f19c120dg4zagb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M495,635.6875 L495,645.6875 L505,645.6875 L495,635.6875 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="325" y="652.7544">No direct logging from CLI</text><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1349" x="3" y="690.3867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="690.3867" y2="690.3867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="693.3867" y2="693.3867"/><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="166" x="594.5" y="679.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="600.5" y="695.8872">Request processing</text><polygon fill="#A80036" points="497,730.0859,507,734.0859,497,738.0859,501,734.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110" x2="503" y1="734.0859" y2="734.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="117" y="729.02">Publish payload to topic ORG/PROJECT/MODULE</text><path d="M8,747.0859 L8,772.0859 L500,772.0859 L500,757.0859 L490,747.0859 L8,747.0859 " fill="#FBFB77" filter="url(#f19c120dg4zagb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490,747.0859 L490,757.0859 L500,757.0859 L490,747.0859 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="462" x="23" y="764.1528">Payload includes a request topic, to which the result should be published</text><polygon fill="#A80036" points="1143,798.3516,1153,802.3516,1143,806.3516,1147,802.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1149" y1="802.3516" y2="802.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="521" y="797.2856">Forward payload to subscribing Module</text><polygon fill="#A80036" points="530,842.6172,520,846.6172,530,850.6172,526,846.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1154" y1="846.6172" y2="846.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="536" y="826.4185">Publish ORG/PROJECT/MODULE/log:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="179" x="536" y="841.5513">Received payload PAYLOAD</text><polygon fill="#A80036" points="1260.5,871.75,1270.5,875.75,1260.5,879.75,1264.5,875.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1266.5" y1="875.75" y2="875.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="521" y="870.6841">Forward logging to Logger</text><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1349" x="3" y="904.3164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="904.3164" y2="904.3164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1352" y1="907.3164" y2="907.3164"/><rect fill="#EEEEEE" filter="url(#f19c120dg4zagb)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="227" x="564" y="893.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="570" y="909.8169">Broadcast processing result</text><polygon fill="#A80036" points="530,944.0156,520,948.0156,530,952.0156,526,948.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1154" y1="948.0156" y2="948.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="617" x="536" y="942.9497">Publish output payload to client's request topic (CLIENTNAME-UUID/CLIENTNAME-UUID-MODULE)</text><polygon fill="#A80036" points="121,973.1484,111,977.1484,121,981.1484,117,977.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="513" y1="977.1484" y2="977.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="127" y="972.0825">Forward payload to subscribing CLI</text><polygon fill="#A80036" points="530,1017.4141,520,1021.4141,530,1025.4141,526,1021.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="524" x2="1154" y1="1021.4141" y2="1021.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="536" y="1001.2153">Publish ORG/PROJECT/MODULE/log:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="536" y="1016.3481">Published payload PAYLOAD</text><polygon fill="#A80036" points="1260.5,1046.5469,1270.5,1050.5469,1260.5,1054.5469,1264.5,1050.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="1266.5" y1="1050.5469" y2="1050.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="521" y="1045.481">Forward logging to Logger</text><!--
@startuml

skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam defaulttextalignment center

actor CLI
participant Broker
participant Module
participant Logger

note over Logger
Not included in
STTS' demo setup
end note

== Logger init ==

Logger -> Broker: Connect to server
activate Broker
Broker -> Logger: Confirm connect
deactivate Broker

Logger -> Broker: Subscribe to +/+/+/log

== Module init ==

Module -> Broker: Connect to server
activate Broker
Broker -> Module: Confirm connect
deactivate Broker

Module -> Broker: Subscribe to topic ORG/PROJECT/MODULE
Module -> Broker: Publish to ORG/PROJECT/MODULE/log:\n//Subscribed to ORG/PROJECT/MODULE//
activate Broker
Broker -> Logger: Forward logging to Logger
deactivate Broker

== CLI init ==

CLI -> Broker: Connect to server
activate Broker
Broker -> CLI: Confirm connect
deactivate Broker

CLI -> Broker: Subscribe to a unique request topic\n(usually CLIENTNAME-UUID or CLIENTNAME-UUID-MODULE)
note left of Broker
No direct logging from CLI
end note

== Request processing ==

CLI -> Broker: Publish payload to topic ORG/PROJECT/MODULE
note left of Broker
Payload includes a request topic, to which the result should be published
end note

activate Broker
Broker -> Module: Forward payload to subscribing Module
deactivate Broker

Module -> Broker: Publish ORG/PROJECT/MODULE/log:\n//Received payload PAYLOAD//
activate Broker
Broker -> Logger: Forward logging to Logger
deactivate Broker

== Broadcast processing result ==

Module -> Broker: Publish output payload to client's request topic (CLIENTNAME-UUID/CLIENTNAME-UUID-MODULE)

activate Broker
Broker -> CLI: Forward payload to subscribing CLI
deactivate Broker

Module -> Broker: Publish ORG/PROJECT/MODULE/log:\n//Published payload PAYLOAD//
activate Broker
Broker -> Logger: Forward logging to Logger
deactivate Broker


@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_80-b15
Operating System: Linux
OS Version: 5.4.0-48-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>